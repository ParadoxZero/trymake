<!--
*   Author: Bineeth (bineeth@trymake.com)
*
*   Copyright (c) 2017 Sibibia Technologies Pvt Ltd
*   All Rights Reserved
*
*   Unauthorized copying of this file, via any medium is strictly prohibited
*   Proprietary and confidential
-->
{% extends 'website/core/base-includes.html' %}
{% load staticfiles %}
{% block title %}
    <title>
        Trymake |
    </title>
{% endblock %}
{% block head %}
    <script src="{% static 'website/core/login.js' %}" ></script>
{% endblock %}
{% block body %}
    <body ng-app="login">
    {{ error_message }}

        <div ng-controller="loginEmail" ng-cloak>
            <div ng-show="user.email_registered || !user">
                <h2>Login</h2>
            </div>
            <div ng-show="!user.email_registered && user">
                <h2>Register</h2>
            </div>
            <form ng-submit="check_mail(email)">
                {% csrf_token %}
                <div ng-show="reg.status == 'ok'">
                    <h3>You have successfully registered with us... Kindly Login.</h3>
                </div>
                <div ng-show="!user">
                    <h3>Enter your email to continue..</h3>
                </div>
                <div ng-show="!user.email_registered && user">
                    <h3>You are not registered with us.. </h3>
                </div>
                <div ng-show="user.email_registered">
                    <h3>Enter your password</h3>
                </div>
                <input type="email" ng-show="!user " placeholder="Enter Email" ng-model="email" id="id_email" name="email" required>
                <input type="submit" ng-hide="user">
            </form>
            <form ng-show="user.email_registered" action="{% url 'core:login' %}" method="post">
                {% csrf_token %}
                <input type="hidden" value="{[email]}" name="email">
                {[email]}<br/>
                <input type="password" placeholder="Enter password" ng-model="password" id="id_password" name="password" required>
                <input type="submit">
            </form>
            <form ng-hide="!user || user.email_registered " ng-submit="register()" name="register_form">
                <input type="text" name="name" ng-model="name" autofocus="" placeholder="Enter Name" required id="id_name"><br/>
                <input type="text" name="phone" ng-model="phone" placeholder="Enter Phone Number" required id="id_phone"><br/>
                <input type="text" name="email" ng-model="email" placeholder="Enter Email" required id="id_email" readonly><br/>
                <input type="password" name="password" ng-model="password" placeholder="Enter password" required id="id_password" minlength="10" ><br/>
                <input type="password" name="password_verify" ng-model="password_verify" placeholder="Repeat password" required id="id_password_verify" minlength="10"  ><br/>
                <input type="submit">
            </form>
        </div>
    <a href="{% url 'social:begin' 'github' %}">Login with GitHub</a><br> {% url 'social:begin' 'github' %}
    </body>
{% endblock %}
